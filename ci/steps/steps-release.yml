parameters:
  workingDir: ''
  versionNumber: ''

steps:
  - script: export VERSION="$(go run version.go)"
    displayName: "Extract Version"

  - task: GithubRelease@0
    displayName: 'Create GitHub Release'
    condition: and(succeeded(), eq(variables['Build.SourceBranch'], 'refs/heads/master'))
    inputs:
      gitHubConnection: github.com_fafg
      repositoryName: azure-open-tools/event-hubs
      action: create
      tagSource: manual
      title: 'Event Hubs Lib'
      tag: "v$(VERSION)"